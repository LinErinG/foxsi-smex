
Requirements
------------
 * IDL (written/tested on IDL 8.4)
 * SSWIDL (what libraries?)

Setup
-----

To start using the FOXSI software, start SSWIDL inside the foxsi-smex/idl directory
and run the following setup script at the prompt.

    IDL> @foxsi-smex-setup-script

This will load data and setup a variety of standardized variables for use through
the code.

<<<<<<< HEAD
Documentation
-------------
All documentation can be found in the /docs folder.
=======
Routines
--------

This folder contains two main functions each with several other peripherals: 

get_foxsi_effective_area.pro            (located in /response folder)
----------------------------

This function may be used to obtain a plot of the FOXSI effective profile with respect
to photon energy. Assuming the setup script above has already been run, a default plot 
may be immediately obtained with the call:

    IDL> eff_area = get_foxsi_effective_area(/plot)

Peripheral Functions:      
- foxsi_load_optics_effective_area.pro    (located in /response folder)
- foxsi_get_optics_properties.pro         (located in /instr folder) 

get_foxsi_image.pro                       (located in /response folder)
-------------------

>> Requires make_map and plot_map functions.


This function is intended to simulate the image measured by the FOXSI detectors for a 
given input source image. Currently this must be a 2D monochromatic source, future iterations
of this programme will introduce the possibility of different energy photons in the source.

This involves modelling the convolution of the image due to the point spread function of
the optics modules and the pixelisation of the detectors. The function may be run with an 
automatically generated source (a narrow gaussian to the right hand side of a 150x150 FOV) 
and a default detector pixel size of 3 arcseconds with the call:

    IDL> rebinned_convolved_map = get_foxsi_image()

And the output viewed with the command:

    IDL> plot_map, rebinned_convolved_map

Alternatively, a user supplied source_map may be supplied and the function run with a 
custom detector pixel size (in arcseconds) as follows:

    IDL> rebinned_convolved_map = get_foxsi_image(source_map, px = "Your Pixelisation Size")

Note the source_map file contains information on the pixel size in arcseconds and the solar
coordinates of the centre of the field of view. This is automatically read in and propagated
in the programme.

The convolution currently only has one point spread function which was obtained from measuring 
the point spread function for the on-axis position (<< note, currently off axis measurement used,
waiting for on axis fitting parameters >>) and fitting this with three gaussians. (See the preamble
of get_psf_array.pro for details). Future iterations of this code will include some functionality 
to include variance in the psf for a given off axis source position and also for convolving at 
different spatial points in the optics cross section.


WARNING: Run time is dependent on the size of the FOV. The default FOV is 150x150 pixels,
or 2.5'x2.5', this runs in a few seconds. Simulating the entire FOXSI FOV (~16.5'x16.5')
will take ~9 Hours.


Peripheral Functions:  
- get_source_map.pro                      (located in /response folder)
- get_psf_array.pro                       (located in /response folder)
  
>>>>>>> foxsi/master
